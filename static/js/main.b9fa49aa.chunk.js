(this.webpackJsonpmyreads=this.webpackJsonpmyreads||[]).push([[0],{20:function(e,t,n){e.exports=n.p+"static/media/no_cover_available.dee850f9.png"},22:function(e,t,n){e.exports=n.p+"static/media/left.6c7df99d.svg"},25:function(e,t,n){e.exports=n(37)},30:function(e,t,n){},31:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(19),l=n.n(o),c=(n(30),n(7)),s=n(8),i=n(10),u=n(9),h=n(11),f=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={moved:!1},n.moveShelf=function(e){n.props.onMove(n.props.book,e.target.value),n.setState({moved:!n.state.moved})},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.book,n=e.books,a=e.shelves,o="none",l=!0,c=!1,s=void 0;try{for(var i,u=n[Symbol.iterator]();!(l=(i=u.next()).done);l=!0){var h=i.value;if(h.id===t.id){o=h.shelf;break}}}catch(f){c=!0,s=f}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}return r.a.createElement("div",{className:"shelf-menu-btn"},r.a.createElement("select",{onChange:this.moveShelf,defaultValue:o},r.a.createElement("option",{value:"none",disabled:!0},"Move to..."),a.map((function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.title)})),"none"!==t.shelf&&r.a.createElement("option",{value:"none"},"Remove")))}}]),t}(a.Component),v=n(20),m=n.n(v),d=function(e){return r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"imgcont"},r.a.createElement(f,{key:e.book.id,book:e.book,books:e.books,onMove:e.onMove,shelves:e.shelves}),r.a.createElement("img",{src:e.book.imageLinks&&e.book.imageLinks.thumbnail?e.book.imageLinks.thumbnail:m.a,alt:e.book.title?e.book.title:"Untitled"})),r.a.createElement("h5",null,e.book.title?e.book.title:"No Title Available"),r.a.createElement("h6",null,e.book.authors?e.book.authors.join(", "):"No Authors Available"))},b=function(e){return r.a.createElement("div",{className:"shelf"},e.shelf.title&&r.a.createElement("div",null,r.a.createElement("h2",{className:"shelf-title"},e.shelf.title)),r.a.createElement("div",{className:"shelf-books"},e.books.map((function(t,n){return r.a.createElement(d,{key:n,book:t,books:e.books,onMove:e.onMove,shelves:e.shelves})}))))},p=function(e){return r.a.createElement("div",{className:"shelves"},e.shelves.map((function(t,n){var a=e.books.filter((function(e){return e.shelf===t.value}));return r.a.createElement(b,{key:n,shelves:e.shelves,shelf:t,books:a,onMove:e.onMove})})))},k=n(21);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g="https://reactnd-books-api.udacity.com",O=localStorage.token;O||(O=localStorage.token=Math.random().toString(36).substr(-8));var j={Accept:"application/json",Authorization:O},S=function(e,t){return fetch("".concat(g,"/books/").concat(e.id),{method:"PUT",headers:E({},j,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},w=function(e){return fetch("".concat(g,"/search"),{method:"POST",headers:E({},j,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},M=n(5),N=n(12),P=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",results:[],catchError:!1},n.filterBooks=function(e){return e.forEach((function(e){var t=!0,a=!1,r=void 0;try{for(var o,l=n.props.shelvedBooks[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var c=o.value;if(e.id===c.id){e.shelf=c.shelf;break}e.shelf="none"}}catch(s){a=!0,r=s}finally{try{t||null==l.return||l.return()}finally{if(a)throw r}}})),e},n.searchResults=function(e){w(e.trim()).then((function(t){e===n.state.query&&(t&&t.length>0?n.setState({results:n.props.shelvedBooks?n.filterBooks(t):t,catchError:!1}):n.setState({results:[],catchError:!0}))}))},n.updateQuery=function(e){n.setState((function(){return{query:e}})),e?n.searchResults(e):n.setState({results:[],catchErr:!1})},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.query,a=t.results,o=t.catchError,l=this.props.shelves;return r.a.createElement("div",{id:"search-pg"},r.a.createElement("input",{id:"search-bar",type:"text",value:n,placeholder:"Search for books",onChange:function(t){return e.updateQuery(t.target.value)}}),r.a.createElement("div",{className:"shelves"},r.a.createElement("div",{className:"shelf"},a&&a.length>0&&r.a.createElement("h3",null,a.length," Results"),r.a.createElement("div",{className:"shelf-books"},r.a.createElement("div",{className:"imgcont"},r.a.createElement(b,{shelf:"Search Results",books:a,shelves:l,onMove:this.props.onMove}))))),o&&r.a.createElement("h3",null,'Your search - "',n,'" - did not match with any books.'))}}]),t}(a.Component),R=(n(31),n(22)),x=n.n(R),A=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],shelves:[{value:"currentlyReading",title:"Currently Reading"},{value:"wantToRead",title:"Want to Read"},{value:"read",title:"Read"}],error:!1},n.handleMove=function(e,t){S(e,t).then((function(a){e.shelf=t,n.setState((function(t){return{books:t.books.filter((function(t){return t.id!==e.id})).concat(e)}}))})).catch((function(){return n.setState({error:!0})}))},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(g,"/books"),{headers:j}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(t){return e.setState({books:t})})).catch((function(){return e.setState({error:!0})}))}},{key:"render",value:function(){var e=this;return this.state.error?r.a.createElement("p",null,"Please try again later."):r.a.createElement("div",{id:"maincontainer"},r.a.createElement("div",{id:"header"},r.a.createElement(M.c,null,r.a.createElement(M.a,{path:"/search",render:function(){return r.a.createElement(N.b,{to:"/"},r.a.createElement("img",{id:"back",src:x.a,alt:"back"}))}}),r.a.createElement(M.a,{exact:!0,path:"/",render:function(){return r.a.createElement("div",{id:"empty"})}})),r.a.createElement(N.b,{to:"/"},r.a.createElement("h1",null,"MyReads")),r.a.createElement("div",{id:"empty"})),r.a.createElement(M.c,null,r.a.createElement(M.a,{exact:!0,path:"/",render:function(t){return r.a.createElement("div",null,r.a.createElement(p,{books:e.state.books,onMove:e.handleMove,shelves:e.state.shelves}),r.a.createElement(N.b,{to:"/search"},r.a.createElement("button",{id:"search-btn",type:"submit"},"+")))}}),r.a.createElement(M.a,{path:"/search",render:function(){return r.a.createElement(P,{shelves:e.state.shelves,onMove:e.handleMove,shelvedBooks:e.state.books})}})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(N.a,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[25,1,2]]]);
//# sourceMappingURL=main.b9fa49aa.chunk.js.map